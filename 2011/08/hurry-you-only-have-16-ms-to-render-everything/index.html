<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Hurry you only have 16 ms to render everything | David Amador</title>
<meta name=keywords content="fps,frametime,optimizations"><meta name=description content="So I’ve been working on my new game and I’m doing some tweaks here and there on the engine.
Mainly with the rendering section, trying to squeeze as much as possible, thus maintaining an acceptable framerate. It’s not like I’m doing a heavily graphic game but I like to know that It can be used even on slower pcs and that I’m not using more cycles than necessary.
This past week and after reading a bunch of stuff and keynotes from John Carmack about Rage (60FPS ftw) I decided to measure my own stuff."><meta name=author content="David Amador"><link rel=canonical href=https://www.david-amador.com/2011/08/hurry-you-only-have-16-ms-to-render-everything/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://www.david-amador.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://www.david-amador.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://www.david-amador.com/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://www.david-amador.com/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://www.david-amador.com/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="Hurry you only have 16 ms to render everything"><meta property="og:description" content="So I’ve been working on my new game and I’m doing some tweaks here and there on the engine.
Mainly with the rendering section, trying to squeeze as much as possible, thus maintaining an acceptable framerate. It’s not like I’m doing a heavily graphic game but I like to know that It can be used even on slower pcs and that I’m not using more cycles than necessary.
This past week and after reading a bunch of stuff and keynotes from John Carmack about Rage (60FPS ftw) I decided to measure my own stuff."><meta property="og:type" content="article"><meta property="og:url" content="https://www.david-amador.com/2011/08/hurry-you-only-have-16-ms-to-render-everything/"><meta property="og:image" content="https://www.david-amador.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2011-08-08T21:45:24+00:00"><meta property="article:modified_time" content="2011-08-08T21:45:24+00:00"><meta property="og:site_name" content="David Amador"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.david-amador.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Hurry you only have 16 ms to render everything"><meta name=twitter:description content="So I’ve been working on my new game and I’m doing some tweaks here and there on the engine.
Mainly with the rendering section, trying to squeeze as much as possible, thus maintaining an acceptable framerate. It’s not like I’m doing a heavily graphic game but I like to know that It can be used even on slower pcs and that I’m not using more cycles than necessary.
This past week and after reading a bunch of stuff and keynotes from John Carmack about Rage (60FPS ftw) I decided to measure my own stuff."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.david-amador.com/posts/"},{"@type":"ListItem","position":2,"name":"Hurry you only have 16 ms to render everything","item":"https://www.david-amador.com/2011/08/hurry-you-only-have-16-ms-to-render-everything/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Hurry you only have 16 ms to render everything","name":"Hurry you only have 16 ms to render everything","description":"So I’ve been working on my new game and I’m doing some tweaks here and there on the engine.\nMainly with the rendering section, trying to squeeze as much as possible, thus maintaining an acceptable framerate. It’s not like I’m doing a heavily graphic game but I like to know that It can be used even on slower pcs and that I’m not using more cycles than necessary.\nThis past week and after reading a bunch of stuff and keynotes from John Carmack about Rage (60FPS ftw) I decided to measure my own stuff.","keywords":["fps","frametime","optimizations"],"articleBody":"So I’ve been working on my new game and I’m doing some tweaks here and there on the engine.\nMainly with the rendering section, trying to squeeze as much as possible, thus maintaining an acceptable framerate. It’s not like I’m doing a heavily graphic game but I like to know that It can be used even on slower pcs and that I’m not using more cycles than necessary.\nThis past week and after reading a bunch of stuff and keynotes from John Carmack about Rage (60FPS ftw) I decided to measure my own stuff.\nSo let’s break this down, your framerate or FPS is the number of images you draw per second, not just that, you have to animate stuff, play sound, collisions, etc.\nMost 3D games nowadays target 30 FPS, it’s the minimum acceptable before you start noticing slowdowns or not so smooth animations, for 2D games it’s a pretty realistic objective to target 60FPS.\nLet say you want to target 30 FPS,\n1 second = 1000 milliseconds 1000/30 = ~33.3 milliseconds That means that for 30 FPS you have to calculate, animate, do collision and draw the scene in under 33.3 milliseconds. And do it again 30 more times.\nSounds hard doesn’t it?\nAt 60 FPS it’s even worse\n1000/60 = ~16.6 milliseconds 16.6 milliseconds to do a full loop on your engine. Actually with modern technology it’s not an impressive accomplishment depending on what you are doing but it’s a good practice to\nlook at these numbers, consider them while you code.\nNow I’ve been making some tests on my own engine and I placed 2000 sprites each with a sprite animation and an A* pathfinding (2000 paths can be cached at a time) rendering at 100 FPS.\nIt runs well and each loops takes 9ms.\n1000/100 = 10ms Each loop could take up to 10ms, so I’m wasting 1ms for each loop, bringing the sum up to 100ms per second.\nWhen I say waste it doesn’t mean you could be doing something else but you could make you game a bit more CPU friendly make making it sleep that extra millisecond each cycle.\nThis will actually make you game use less of a processor and you can even check it on the Windows Task Manager.\nAt just 60 FPS, let’s say I’m drawing everything at 9ms too, but I could take up to 16.6\n16 - 9 = 7ms 7 * 60 (FPS) = 420ms You can make your application sleep for almost half of a second and the game would run exactly the same\nIsn’t that something?\nI’ve made a change on my pump to accommodate this and tested on Vizati, now most of the time it uses 12% of the CPU with bursts of 32%.\nOf course by measuring this you can also do cooler stuff like, let’s say you walk by a heavy area, or need to do some calculations, by lowering the intended FPS and drawing less times in that second you can get the other calculations done faster and return to a normal FPS much faster.\nWell I hope this wasn’t too boring =)\nEDIT:\nAfter talking to some other devs there are mixed feelings about the benefits of putting your application to sleep those extra milliseconds. One thing that’s worth mentioning is that when you put your application to sleep you only guarantee that it will be idle for a minimum of let’s say 5ms, you may only regain control after 7ms, that’s really up to the OS.\nSo my suggestion is, leave it as an option in the game, CPU throttling or something. Each user may test and see if it benefits, and in a couple of years it may in fact make some difference with to futuristic 30 core cpu where you don’t need to be using 100% of it. Starcraft 1 got a patch to do just that some time ago.\n","wordCount":"662","inLanguage":"en","datePublished":"2011-08-08T21:45:24Z","dateModified":"2011-08-08T21:45:24Z","author":{"@type":"Person","name":"David Amador"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.david-amador.com/2011/08/hurry-you-only-have-16-ms-to-render-everything/"},"publisher":{"@type":"Organization","name":"David Amador","logo":{"@type":"ImageObject","url":"https://www.david-amador.com/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.david-amador.com accesskey=h title="David Amador (Alt + H)"><img src=https://www.david-amador.com/apple-touch-icon.png alt aria-label=logo height=35>David Amador</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.david-amador.com/ title=Blog><span>Blog</span></a></li><li><a href=https://www.david-amador.com/games/ title=Games><span>Games</span></a></li><li><a href=https://www.david-amador.com/portfolio/ title=Portfolio><span>Portfolio</span></a></li><li><a href=https://www.david-amador.com/about/ title="About Me"><span>About Me</span></a></li><li><a href=https://www.david-amador.com/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://www.david-amador.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.david-amador.com>Home</a>&nbsp;»&nbsp;<a href=https://www.david-amador.com/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Hurry you only have 16 ms to render everything</h1><div class=post-meta><span title='2011-08-08 21:45:24 +0000 UTC'>August 8, 2011</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;662 words&nbsp;·&nbsp;David Amador&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/2011-08-08-hurry-you-only-have-16-ms-to-render-everything.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>So I’ve been working on my new game and I’m doing some tweaks here and there on the engine.</p><p>Mainly with the rendering section, trying to squeeze as much as possible, thus maintaining an acceptable framerate. It’s not like I’m doing a heavily graphic game but I like to know that It can be used even on slower pcs and that I’m not using more cycles than necessary.</p><p>This past week and after reading a bunch of stuff and keynotes from John Carmack about Rage (60FPS ftw) I decided to measure my own stuff.</p><p>So let’s break this down, your framerate or FPS is the number of images you draw per second, not just that, you have to animate stuff, play sound, collisions, etc.</p><p>Most 3D games nowadays target 30 FPS, it’s the minimum acceptable before you start noticing slowdowns or not so smooth animations, for 2D games it’s a pretty realistic objective to target 60FPS.</p><p>Let say you want to target 30 FPS,</p><pre tabindex=0><code>&lt;pre lang=&#34;cpp&#34;&gt;
  1 second = 1000 milliseconds
  1000/30 = ~33.3 milliseconds
</code></pre><p>That means that for 30 FPS you have to calculate, animate, do collision and draw the scene in under 33.3 milliseconds. And do it again 30 more times.<br>Sounds hard doesn’t it?</p><p>At 60 FPS it’s even worse</p><pre tabindex=0><code>&lt;pre lang=&#34;cpp&#34;&gt;
  1000/60 = ~16.6 milliseconds
</code></pre><p><img loading=lazy src=/wp-content/uploads/2011/08/SonicRunMediumAni.gif alt title=SonicRunMediumAni></p><p>16.6 milliseconds to do a full loop on your engine. Actually with modern technology it’s not an impressive accomplishment depending on what you are doing but it’s a good practice to<br>look at these numbers, consider them while you code.</p><p>Now I’ve been making some tests on my own engine and I placed 2000 sprites each with a sprite animation and an A* pathfinding (2000 paths can be cached at a time) rendering at 100 FPS.<br>It runs well and each loops takes 9ms.</p><pre tabindex=0><code>&lt;pre lang=&#34;cpp&#34;&gt;
   1000/100 = 10ms
</code></pre><p>Each loop could take up to 10ms, so I’m wasting 1ms for each loop, bringing the sum up to 100ms per second.<br>When I say waste it doesn’t mean you could be doing something else but you could make you game a bit more CPU friendly make making it sleep that extra millisecond each cycle.<br>This will actually make you game use less of a processor and you can even check it on the Windows Task Manager.</p><p>At just 60 FPS, let’s say I’m drawing everything at 9ms too, but I could take up to 16.6</p><pre tabindex=0><code>&lt;pre lang=&#34;cpp&#34;&gt;
   16 - 9 = 7ms
   7 * 60 (FPS) = 420ms
</code></pre><p>You can make your application sleep for almost half of a second and the game would run exactly the same<br>Isn’t that something?</p><p>I’ve made a change on my pump to accommodate this and tested on Vizati, now most of the time it uses 12% of the CPU with bursts of 32%.<br>Of course by measuring this you can also do cooler stuff like, let’s say you walk by a heavy area, or need to do some calculations, by lowering the intended FPS and drawing less times in that second you can get the other calculations done faster and return to a normal FPS much faster.</p><p>Well I hope this wasn’t too boring =)</p><blockquote><p>EDIT:<br>After talking to some other devs there are mixed feelings about the benefits of putting your application to sleep those extra milliseconds. One thing that’s worth mentioning is that when you put your application to sleep you only guarantee that it will be idle for a minimum of let’s say 5ms, you may only regain control after 7ms, that’s really up to the OS.<br>So my suggestion is, leave it as an option in the game, CPU throttling or something. Each user may test and see if it benefits, and in a couple of years it may in fact make some difference with to futuristic 30 core cpu where you don’t need to be using 100% of it. Starcraft 1 got a patch to do just that some time ago.</p></blockquote></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.david-amador.com/tags/fps/>fps</a></li><li><a href=https://www.david-amador.com/tags/frametime/>frametime</a></li><li><a href=https://www.david-amador.com/tags/optimizations/>optimizations</a></li></ul><nav class=paginav><a class=prev href=https://www.david-amador.com/2011/10/something-new-in-the-horizon/><span class=title>« Prev</span><br><span>something new in the horizon&amp;#8230;</span>
</a><a class=next href=https://www.david-amador.com/2011/07/using-git-for-revision-control/><span class=title>Next »</span><br><span>Using Git for revision control</span></a></nav></footer><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//upfallstudios.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></main><footer class=footer><span>&copy; 2024 <a href=https://www.david-amador.com>David Amador</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>