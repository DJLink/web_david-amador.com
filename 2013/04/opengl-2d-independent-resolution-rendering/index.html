<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>OpenGL 2D Independent Resolution Rendering | David Amador</title>
<meta name=keywords content="c++,independent,opengl,Rendering"><meta name=description content="Around two years ago I made a tutorial for XNA in which you could render 2D games scaled to the current window resolution with proper letter-boxes or pillar-boxes.
As many know since then I moved to C++ and OpenGL, and ocasionally people ask me “Can you still do that independent resolution thing?”, and yes it’s perfectly possible. I’ve used this on all latest Windows, Mac and iOS, in case you are wondering."><meta name=author content="David Amador"><link rel=canonical href=https://djlink.github.io/web_david-amador.com/2013/04/opengl-2d-independent-resolution-rendering/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/web_david-amador.com/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://djlink.github.io/web_david-amador.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://djlink.github.io/web_david-amador.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://djlink.github.io/web_david-amador.com/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://djlink.github.io/web_david-amador.com/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://djlink.github.io/web_david-amador.com/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="OpenGL 2D Independent Resolution Rendering"><meta property="og:description" content="Around two years ago I made a tutorial for XNA in which you could render 2D games scaled to the current window resolution with proper letter-boxes or pillar-boxes.
As many know since then I moved to C++ and OpenGL, and ocasionally people ask me “Can you still do that independent resolution thing?”, and yes it’s perfectly possible. I’ve used this on all latest Windows, Mac and iOS, in case you are wondering."><meta property="og:type" content="article"><meta property="og:url" content="https://djlink.github.io/web_david-amador.com/2013/04/opengl-2d-independent-resolution-rendering/"><meta property="og:image" content="https://djlink.github.io/web_david-amador.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2013-04-22T11:22:22+00:00"><meta property="article:modified_time" content="2013-04-22T11:22:22+00:00"><meta property="og:site_name" content="David Amador"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://djlink.github.io/web_david-amador.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="OpenGL 2D Independent Resolution Rendering"><meta name=twitter:description content="Around two years ago I made a tutorial for XNA in which you could render 2D games scaled to the current window resolution with proper letter-boxes or pillar-boxes.
As many know since then I moved to C++ and OpenGL, and ocasionally people ask me “Can you still do that independent resolution thing?”, and yes it’s perfectly possible. I’ve used this on all latest Windows, Mac and iOS, in case you are wondering."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://djlink.github.io/web_david-amador.com/posts/"},{"@type":"ListItem","position":2,"name":"OpenGL 2D Independent Resolution Rendering","item":"https://djlink.github.io/web_david-amador.com/2013/04/opengl-2d-independent-resolution-rendering/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"OpenGL 2D Independent Resolution Rendering","name":"OpenGL 2D Independent Resolution Rendering","description":"Around two years ago I made a tutorial for XNA in which you could render 2D games scaled to the current window resolution with proper letter-boxes or pillar-boxes.\nAs many know since then I moved to C++ and OpenGL, and ocasionally people ask me “Can you still do that independent resolution thing?”, and yes it’s perfectly possible. I’ve used this on all latest Windows, Mac and iOS, in case you are wondering.","keywords":["c++","independent","opengl","Rendering"],"articleBody":"Around two years ago I made a tutorial for XNA in which you could render 2D games scaled to the current window resolution with proper letter-boxes or pillar-boxes.\nAs many know since then I moved to C++ and OpenGL, and ocasionally people ask me “Can you still do that independent resolution thing?”, and yes it’s perfectly possible. I’ve used this on all latest Windows, Mac and iOS, in case you are wondering.\nThe code is quite straight forward actually. In case you are not familiar with what we are trying to achieve here I recommend my other tutorial first, where I explain this is more detail.\nSo first we need to set our viewport with proper letterbox or pillar box, if required.\n// Let's start by clearing the whole screen with black glClearColor(0.0f, 0.0f, 0.0f, 1.0f);\tglClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); // Both these values must be your real window size, so of course these values can't be static int screen_width = 1024; int screen_height = 728; // This is your target virtual resolution for the game, the size you built your game to int virtual_width=1280; int virtual_height=720; float targetAspectRatio = virtual_width/virtual_height; // figure out the largest area that fits in this resolution at the desired aspect ratio int width = screen_width ; int height = (int)(width / targetAspectRatio + 0.5f); if (height \u003e screen_height ) { //It doesn't fit our height, we must switch to pillarbox then height = screen_height ; width = (int)(height * targetAspectRatio + 0.5f); } // set up the new viewport centered in the backbuffer int vp_x = (screen_width / 2) - (width / 2); int vp_y = (screen_height / 2) - (height/ 2); glViewport(vp_x,vp_y,width,height); Now that our viewport is set we should set our 2d perspective\n// Now we use glOrtho glMatrixMode(GL_PROJECTION); glPushMatrix(); glLoadIdentity(); // This function is for Mac and Windows only, if you are using // iOS you should use glOrthof instead glOrtho(0, screen_width, screen_height, 0, -1, 1); /*if on iOS*/ //glOrthof(0, screen_width, screen_height, 0, -1, 1); glMatrixMode(GL_MODELVIEW); glPushMatrix(); glLoadIdentity(); So now we should push the transformations before actually drawing anything\n// Push in scale transformations glMatrixMode(GL_MODELVIEW); glPushMatrix(); //Now to calculate the scale considering the screen size and virtual size float scale_x = (float)((float)(screen_width)) / (float)virtual_width); float scale_y = (float)((float)(screen_height) / (float)virtual_height); glScalef(scale_x, scale_y, 1.0f);\tWe can now proceed to drawing everything we want, that’s is really up to you now.\n// Place your sprites drawing code here // Example glBegin(GL_TRIANGLES); glColor3f(0.1, 0.2, 0.3); glVertex3f(0, 0, 0); glVertex3f(50, 0, 0); glVertex3f(0, 50, 0); glEnd(); I really don’t recommend using glBegin() and glEnd(), this was just for simplicity, you should use glDrawElements or glDrawArrays\nAfter you finish you drawing code we can proceed to the rest\n// This pops those matrices for the scale transformations. glMatrixMode(GL_MODELVIEW); glLoadIdentity(); glPopMatrix();\t//Now to finish we should end our 2D perspective\nglMatrixMode(GL_PROJECTION); glPopMatrix(); glMatrixMode(GL_MODELVIEW); glPopMatrix();\tAnd that’s pretty much it. I have this code on my games and it works fine, at least for what I usually need. Feel free to tweak it around for your needs. Hope this helps to get a picture on how to achieve this effect. Let me know if you find any bug.\nHere’s an example of what you might achieve with this\n","wordCount":"551","inLanguage":"en","datePublished":"2013-04-22T11:22:22Z","dateModified":"2013-04-22T11:22:22Z","author":{"@type":"Person","name":"David Amador"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://djlink.github.io/web_david-amador.com/2013/04/opengl-2d-independent-resolution-rendering/"},"publisher":{"@type":"Organization","name":"David Amador","logo":{"@type":"ImageObject","url":"https://djlink.github.io/web_david-amador.com/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://djlink.github.io/web_david-amador.com/ accesskey=h title="David Amador (Alt + H)"><img src=https://djlink.github.io/apple-touch-icon.png alt aria-label=logo height=35>David Amador</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://djlink.github.io/web_david-amador.com/ title=Blog><span>Blog</span></a></li><li><a href=https://djlink.github.io/web_david-amador.com/games/ title=Games><span>Games</span></a></li><li><a href=https://djlink.github.io/web_david-amador.com/portfolio/ title=Portfolio><span>Portfolio</span></a></li><li><a href=https://djlink.github.io/web_david-amador.com/about/ title="About Me"><span>About Me</span></a></li><li><a href=https://djlink.github.io/web_david-amador.com/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://djlink.github.io/web_david-amador.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://djlink.github.io/web_david-amador.com/>Home</a>&nbsp;»&nbsp;<a href=https://djlink.github.io/web_david-amador.com/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">OpenGL 2D Independent Resolution Rendering</h1><div class=post-meta><span title='2013-04-22 11:22:22 +0000 UTC'>April 22, 2013</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;551 words&nbsp;·&nbsp;David Amador&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/2013-04-22-opengl-2d-independent-resolution-rendering.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>Around two years ago I made a <a href=/2010/03/xna-2d-independent-resolution-rendering/ title="XNA 2D Independent Resolution Rendering">tutorial for XNA</a> in which you could render 2D games scaled to the current window resolution with proper letter-boxes or pillar-boxes.</p><p>As many know since then I moved to C++ and OpenGL, and ocasionally people ask me “Can you still do that independent resolution thing?”, and yes it’s perfectly possible. I’ve used this on all latest Windows, Mac and iOS, in case you are wondering.</p><p>The code is quite straight forward actually. In case you are not familiar with what we are trying to achieve here I recommend my other tutorial first, where I explain this is more detail.</p><p>So first we need to set our viewport with proper letterbox or pillar box, if required.</p><pre tabindex=0><code>&lt;pre lang=&#34;cpp&#34;&gt;

// Let&#39;s start by clearing the whole screen with black
glClearColor(0.0f, 0.0f, 0.0f, 1.0f);	
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

// Both these values must be your real window size, so of course these values can&#39;t be static
int screen_width = 1024;  
int screen_height = 728; 

// This is your target virtual resolution for the game, the size you built your game to
int virtual_width=1280;
int virtual_height=720;
   
float targetAspectRatio = virtual_width/virtual_height;
	
// figure out the largest area that fits in this resolution at the desired aspect ratio
int width = screen_width ;
int height = (int)(width / targetAspectRatio + 0.5f);

if (height &gt; screen_height )
{
   //It doesn&#39;t fit our height, we must switch to pillarbox then
    height = screen_height ;
    width = (int)(height * targetAspectRatio + 0.5f);
}

// set up the new viewport centered in the backbuffer
int vp_x = (screen_width  / 2) - (width / 2);
int vp_y = (screen_height / 2) - (height/ 2);
   
glViewport(vp_x,vp_y,width,height);
</code></pre><p>Now that our viewport is set we should set our 2d perspective</p><pre tabindex=0><code>&lt;pre lang=&#34;cpp&#34;&gt;

// Now we use glOrtho
glMatrixMode(GL_PROJECTION);
glPushMatrix();
glLoadIdentity();
// This function is for Mac and Windows only, if you are using
// iOS you should use glOrthof instead
glOrtho(0, screen_width, screen_height, 0, -1, 1);
/*if on iOS*/ //glOrthof(0, screen_width, screen_height, 0, -1, 1);
glMatrixMode(GL_MODELVIEW);
glPushMatrix();
glLoadIdentity();
</code></pre><p>So now we should push the transformations before actually drawing anything</p><pre tabindex=0><code>&lt;pre lang=&#34;cpp&#34;&gt;
// Push in scale transformations
glMatrixMode(GL_MODELVIEW);
glPushMatrix();

//Now to calculate the scale considering the screen size and virtual size
float scale_x = (float)((float)(screen_width)) / (float)virtual_width);
float scale_y = (float)((float)(screen_height) / (float)virtual_height);
glScalef(scale_x, scale_y, 1.0f);		
</code></pre><p>We can now proceed to drawing everything we want, that’s is really up to you now.</p><pre tabindex=0><code>&lt;pre lang=&#34;cpp&#34;&gt;
// Place your sprites drawing code here
// Example
glBegin(GL_TRIANGLES);
glColor3f(0.1, 0.2, 0.3);
glVertex3f(0,  0, 0);
glVertex3f(50, 0, 0);
glVertex3f(0, 50, 0);
glEnd();
</code></pre><p>I really don’t recommend using glBegin() and glEnd(), this was just for simplicity, you should use glDrawElements or glDrawArrays</p><p>After you finish you drawing code we can proceed to the rest</p><pre tabindex=0><code>&lt;pre lang=&#34;cpp&#34;&gt;
// This pops those matrices for the scale transformations.
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
glPopMatrix();		
</code></pre><p>//Now to finish we should end our 2D perspective</p><pre tabindex=0><code>&lt;pre lang=&#34;cpp&#34;&gt;
glMatrixMode(GL_PROJECTION);
glPopMatrix();   
glMatrixMode(GL_MODELVIEW);
glPopMatrix();	
</code></pre><p>And that’s pretty much it. I have this code on my games and it works fine, at least for what I usually need. Feel free to tweak it around for your needs. Hope this helps to get a picture on how to achieve this effect. Let me know if you find any bug.</p><p>Here’s an example of what you might achieve with this</p><p><a href=/wp-content/uploads/2010/03/Base_1280x720_Res_1280x800.jpg><img loading=lazy src=/wp-content/uploads/2010/03/Base_1280x720_Res_1280x800-300x193.jpg alt=Base_1280x720_Res_1280x800>
</a><a href=/wp-content/uploads/2010/03/Base_1280x720_Res_800x600.jpg><img loading=lazy src=/wp-content/uploads/2010/03/Base_1280x720_Res_800x600-300x234.jpg alt=Base_1280x720_Res_800x600>
</a><a href=/wp-content/uploads/2010/03/Base_1024x768_Res_800x600.jpg><img loading=lazy src=/wp-content/uploads/2010/03/Base_1024x768_Res_800x600-300x234.jpg alt=Base_1024x768_Res_800x600>
</a><a href=/wp-content/uploads/2010/03/Base_1280x720_Res_480x640.jpg><img loading=lazy src=/wp-content/uploads/2010/03/Base_1280x720_Res_480x640-219x300.jpg alt=Base_1280x720_Res_480x640>
</a><a href=/wp-content/uploads/2010/03/Base_1024x768_Res_1280x720.jpg><img loading=lazy src=/wp-content/uploads/2010/03/Base_1024x768_Res_1280x720-300x175.jpg alt=Base_1024x768_Res_1280x720></a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://djlink.github.io/web_david-amador.com/tags/c++/>c++</a></li><li><a href=https://djlink.github.io/web_david-amador.com/tags/independent/>independent</a></li><li><a href=https://djlink.github.io/web_david-amador.com/tags/opengl/>opengl</a></li><li><a href=https://djlink.github.io/web_david-amador.com/tags/rendering/>Rendering</a></li></ul><nav class=paginav><a class=prev href=https://djlink.github.io/web_david-amador.com/2013/04/puwang-is-running-on-pc-releasing-it-for-free/><span class=title>« Prev</span><br><span>Puwang is running on PC, releasing it for free</span>
</a><a class=next href=https://djlink.github.io/web_david-amador.com/2013/04/updates-development-and-new-feed-url/><span class=title>Next »</span><br><span>Updates, development and new feed url</span></a></nav></footer><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//upfallstudios.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></main><footer class=footer><span>&copy; 2024 <a href=https://djlink.github.io/web_david-amador.com/>David Amador</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>