<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>OpenGL Camera 2d with zoom and rotation | David Amador</title>
<meta name=keywords content="camera2d,matrix,opengl"><meta name=description content="I’ve been working on OpenGL for some time now and one of the things that some people have asked me is how to do that 2d camera with zoom and rotation in a similar way to a post regarding a XNA 2D Camera I wrote some time ago.
Some of them where just subtracting the camera position to all objects drawn, but that’s just ‘ugly’ in my opinion. And the advantage of using a more complicated (at first glance) system as a matrix is that you can easily apply more complicated operations like scaling and rotation."><meta name=author content="David Amador"><link rel=canonical href=https://www.david-amador.com/2013/07/opengl-camera-2d-with-zoom-and-rotation/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://www.david-amador.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://www.david-amador.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://www.david-amador.com/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://www.david-amador.com/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://www.david-amador.com/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="OpenGL Camera 2d with zoom and rotation"><meta property="og:description" content="I’ve been working on OpenGL for some time now and one of the things that some people have asked me is how to do that 2d camera with zoom and rotation in a similar way to a post regarding a XNA 2D Camera I wrote some time ago.
Some of them where just subtracting the camera position to all objects drawn, but that’s just ‘ugly’ in my opinion. And the advantage of using a more complicated (at first glance) system as a matrix is that you can easily apply more complicated operations like scaling and rotation."><meta property="og:type" content="article"><meta property="og:url" content="https://www.david-amador.com/2013/07/opengl-camera-2d-with-zoom-and-rotation/"><meta property="og:image" content="https://www.david-amador.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2013-07-11T12:09:48+00:00"><meta property="article:modified_time" content="2013-07-11T12:09:48+00:00"><meta property="og:site_name" content="David Amador"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.david-amador.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="OpenGL Camera 2d with zoom and rotation"><meta name=twitter:description content="I’ve been working on OpenGL for some time now and one of the things that some people have asked me is how to do that 2d camera with zoom and rotation in a similar way to a post regarding a XNA 2D Camera I wrote some time ago.
Some of them where just subtracting the camera position to all objects drawn, but that’s just ‘ugly’ in my opinion. And the advantage of using a more complicated (at first glance) system as a matrix is that you can easily apply more complicated operations like scaling and rotation."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.david-amador.com/posts/"},{"@type":"ListItem","position":2,"name":"OpenGL Camera 2d with zoom and rotation","item":"https://www.david-amador.com/2013/07/opengl-camera-2d-with-zoom-and-rotation/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"OpenGL Camera 2d with zoom and rotation","name":"OpenGL Camera 2d with zoom and rotation","description":"I’ve been working on OpenGL for some time now and one of the things that some people have asked me is how to do that 2d camera with zoom and rotation in a similar way to a post regarding a XNA 2D Camera I wrote some time ago.\nSome of them where just subtracting the camera position to all objects drawn, but that’s just ‘ugly’ in my opinion. And the advantage of using a more complicated (at first glance) system as a matrix is that you can easily apply more complicated operations like scaling and rotation.","keywords":["camera2d","matrix","opengl"],"articleBody":"I’ve been working on OpenGL for some time now and one of the things that some people have asked me is how to do that 2d camera with zoom and rotation in a similar way to a post regarding a XNA 2D Camera I wrote some time ago.\nSome of them where just subtracting the camera position to all objects drawn, but that’s just ‘ugly’ in my opinion. And the advantage of using a more complicated (at first glance) system as a matrix is that you can easily apply more complicated operations like scaling and rotation.\nThe Camera2D class is simple enough:\nclass Camera2d { public: Camera2d(void); virtual ~Camera2d(void);\tinline void\tset_zoom(const float zoom){ _zoom = zoom; } inline float\tget_zoom()const{ return _zoom; }\tMatrix\tget_transformation();\tprotected: void recreate_tranformation_matrix(); protected: // Saves Last Property // This is used for knowing when to update the Matrix struct Transformation { Matrix _matrix; Vector2f _last_pos; float _last_zoom; Vector2f _last_origin; float _last_rotation; void update(const Vector2f\u0026 p, const Vector2f\u0026 origin, const float zoom, const float rotation) { _last_pos = p; _last_origin = origin; _last_zoom = zoom; _last_rotation = rotation;\t} }; protected: float\t_zoom;\tTransformation _transform; public: Vector2f\t_pos; Vector2f\t_origin; float\t_rotation; }; As the name implies Vector2f and Matrix are the Vector and the Matrix, the full code is included in the project that you can download at the end of the article so I’m just going to mention the most important parts.\nIn Camera2D class the most important function is the recreate_tranformation_matrix(), get_transformation() just checks if we should recreate it.\nvoid Camera2d::recreate_tranformation_matrix() { // Update Variables _transform.update(_pos,_origin,_zoom,_rotation); _transform._matrix = /* Create our camera matrix, translation to origin, then rotation, scale and finally translation to the camera position */ Matrix::CreateTranslation(-_pos.X,-_pos.Y, 0) * Matrix::CreateScale(_zoom, _zoom, 1)*\tMatrix::CreateRotationZ(_rotation) * Matrix::CreateTranslation(_origin.X,_origin.Y, 0);\t} As you can see we create our finally Matrix considering several things, first there’s the camera origin or center. This is useful for rotations and scales when you want to keep the camera focusing on a certain element, usually the center. The most common positions will probably be the center of the camera or 0,0.\nNext we have a rotation on Z, next Zoom, this is how much the camera will zoom in or out, again the origin will impact where the zoom center is. Finally the camera position itself. The order of these operations is extremely important since mat1*mat2 != mat2*mat1.\nSo how could you use this?\nFirst the camera setup\n// Create our new camera Camera2d* camera = new Camera2d(); camera-\u003e_origin.set(width/2.0f, height/2.0f); // width and height are the screen sizes, so we can focus on the center camera-\u003epos.set(250.0f,100.0f); camera-\u003eset_zoom(2.0f); Now to actually draw.\nglMatrixMode(GL_MODELVIEW); glPushMatrix(); glLoadIdentity();\t// Get our transformation matrix Matrix mat = camera-\u003eget_transformation(); // Convert it to a float 16 float m[16]; mat.to_mat4(m); /* Send matrix to opengl*/ glMultMatrixf(m); // Draw anything we want This code can be optimized in many ways, but the idea here is to be simple enough to understand, that is the most important.\nDownload: OpenGLCamera2D.rar\nThis is a VS 2010 project using GLFW for window creation. I usually don’t use GLFW but this kept me for writing a bunch of window handling code. You can use whatever library you want, this was just to keep the project as clean as possible.\nArrow Keys- Camera movement\nPage Up/Down – Camera Rotation\nHome/End – Camera zoom\nAs always let me know if you find any problems/bugs with the article. I wrote all this code late last night so that’s usually recipe for doom.\n","wordCount":"595","inLanguage":"en","datePublished":"2013-07-11T12:09:48Z","dateModified":"2013-07-11T12:09:48Z","author":{"@type":"Person","name":"David Amador"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.david-amador.com/2013/07/opengl-camera-2d-with-zoom-and-rotation/"},"publisher":{"@type":"Organization","name":"David Amador","logo":{"@type":"ImageObject","url":"https://www.david-amador.com/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.david-amador.com accesskey=h title="David Amador (Alt + H)"><img src=https://www.david-amador.com/apple-touch-icon.png alt aria-label=logo height=35>David Amador</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.david-amador.com/ title=Blog><span>Blog</span></a></li><li><a href=https://www.david-amador.com/games/ title=Games><span>Games</span></a></li><li><a href=https://www.david-amador.com/portfolio/ title=Portfolio><span>Portfolio</span></a></li><li><a href=https://www.david-amador.com/about/ title="About Me"><span>About Me</span></a></li><li><a href=https://www.david-amador.com/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://www.david-amador.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.david-amador.com>Home</a>&nbsp;»&nbsp;<a href=https://www.david-amador.com/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">OpenGL Camera 2d with zoom and rotation</h1><div class=post-meta><span title='2013-07-11 12:09:48 +0000 UTC'>July 11, 2013</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;595 words&nbsp;·&nbsp;David Amador&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/2013-07-11-opengl-camera-2d-with-zoom-and-rotation.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>I’ve been working on OpenGL for some time now and one of the things that some people have asked me is how to do that 2d camera with zoom and rotation in a similar way to a post regarding a <a href=/2009/10/xna-camera-2d-with-zoom-and-rotation/ title="XNA Camera 2d with zoom and rotation">XNA 2D Camera</a> I wrote some time ago.<br>Some of them where just subtracting the camera position to all objects drawn, but that’s just ‘ugly’ in my opinion. And the advantage of using a more complicated (at first glance) system as a matrix is that you can easily apply more complicated operations like scaling and rotation.</p><p><a href=/wp-content/uploads/2013/07/camera2d.jpg><img loading=lazy src=/wp-content/uploads/2013/07/camera2d-300x234.jpg alt=camera2d></a></p><p>The Camera2D class is simple enough:</p><pre tabindex=0><code>&lt;pre lang=&#34;cpp&#34;&gt;
class Camera2d
{
public:
	Camera2d(void);
	virtual ~Camera2d(void);	
	inline void	set_zoom(const float zoom){ _zoom = zoom; }
	inline float	get_zoom()const{ return _zoom; }	
	       Matrix	get_transformation();	
protected:
       void recreate_tranformation_matrix();
protected:
	// Saves Last Property
	// This is used for knowing when to update the Matrix
	struct Transformation
	{
		Matrix       _matrix;
		Vector2f     _last_pos;
		float        _last_zoom;
		Vector2f     _last_origin;
		float        _last_rotation;
		void update(const Vector2f&amp; p, const Vector2f&amp; origin, const float zoom, const float rotation)
                 { _last_pos = p; _last_origin = origin; _last_zoom = zoom; _last_rotation = rotation;	}
	};
protected:
	float		_zoom;	
	Transformation  _transform;
public:
	Vector2f	_pos;
	Vector2f	_origin;
	float		_rotation;
};
</code></pre><p>As the name implies Vector2f and Matrix are the Vector and the Matrix, the full code is included in the project that you can download at the end of the article so I’m just going to mention the most important parts.<br>In Camera2D class the most important function is the recreate_tranformation_matrix(), get_transformation() just checks if we should recreate it.</p><pre tabindex=0><code>&lt;pre lang=&#34;cpp&#34;&gt;

void Camera2d::recreate_tranformation_matrix()
{
    // Update Variables
    _transform.update(_pos,_origin,_zoom,_rotation);

    _transform._matrix = 
		/*
			Create our camera matrix, 
			translation to origin, then rotation, scale and finally translation to the camera position
		*/
		Matrix::CreateTranslation(-_pos.X,-_pos.Y, 0) *
		Matrix::CreateScale(_zoom, _zoom, 1)*						
		Matrix::CreateRotationZ(_rotation) *
		Matrix::CreateTranslation(_origin.X,_origin.Y, 0);		   
}
</code></pre><p>As you can see we create our finally Matrix considering several things, first there’s the camera origin or center. This is useful for rotations and scales when you want to keep the camera focusing on a certain element, usually the center. The most common positions will probably be the center of the camera or 0,0.<br>Next we have a rotation on Z, next Zoom, this is how much the camera will zoom in or out, again the origin will impact where the zoom center is. Finally the camera position itself. The order of these operations is extremely important since mat1*mat2 != mat2*mat1.</p><p>So how could you use this?<br>First the camera setup</p><pre tabindex=0><code>&lt;pre lang=&#34;cpp&#34;&gt;
// Create our new camera
Camera2d* camera = new Camera2d();
camera-&gt;_origin.set(width/2.0f, height/2.0f); // width and height are the screen sizes, so we can focus on the center
camera-&gt;pos.set(250.0f,100.0f);
camera-&gt;set_zoom(2.0f);
</code></pre><p>Now to actually draw.</p><pre tabindex=0><code>&lt;pre lang=&#34;cpp&#34;&gt;
glMatrixMode(GL_MODELVIEW);
glPushMatrix();
glLoadIdentity();	
// Get our transformation matrix
Matrix mat = camera-&gt;get_transformation();
// Convert it to a float 16
float m[16];
mat.to_mat4(m);
/* Send matrix to opengl*/
glMultMatrixf(m);

// Draw anything we want
</code></pre><p>This code can be optimized in many ways, but the idea here is to be simple enough to understand, that is the most important.</p><p>Download: <a href=/blog_tutorials/OpenGLCamera2D.rar>OpenGLCamera2D.rar</a></p><blockquote><p>This is a VS 2010 project using GLFW for window creation. I usually don’t use GLFW but this kept me for writing a bunch of window handling code. You can use whatever library you want, this was just to keep the project as clean as possible.<br>Arrow Keys- Camera movement<br>Page Up/Down – Camera Rotation<br>Home/End – Camera zoom</p></blockquote><p>As always let me know if you find any problems/bugs with the article. I wrote all this code late last night so that’s usually recipe for doom.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.david-amador.com/tags/camera2d/>camera2d</a></li><li><a href=https://www.david-amador.com/tags/matrix/>matrix</a></li><li><a href=https://www.david-amador.com/tags/opengl/>opengl</a></li></ul><nav class=paginav><a class=prev href=https://www.david-amador.com/2013/07/lets-take-a-look-at-sdl-game-development-book/><span class=title>« Prev</span><br><span>Let's take a look at SDL Game Development book</span>
</a><a class=next href=https://www.david-amador.com/2013/04/puwang-is-running-on-pc-releasing-it-for-free/><span class=title>Next »</span><br><span>Puwang is running on PC, releasing it for free</span></a></nav></footer><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//upfallstudios.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></main><footer class=footer><span>&copy; 2024 <a href=https://www.david-amador.com>David Amador</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>