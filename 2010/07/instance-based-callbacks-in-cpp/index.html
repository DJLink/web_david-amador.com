<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Instance based Callbacks in C++ | David Amador</title>
<meta name=keywords content="c++,callbacks"><meta name=description content="One of the things that was probably forgotten but the dudes who made C++ standard were callbacks, there’s no out of the box solution for Instance based Callbacks, just for functions.
When I moved to C# I was really happy with the way delegates work, it’s simple, easy and most of all, it works.
On game development one of the things callbacks are usually used is for Buttons, you have a menu and want to attribute a function to each button."><meta name=author content="David Amador"><link rel=canonical href=https://www.david-amador.com/2010/07/instance-based-callbacks-in-cpp/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://www.david-amador.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://www.david-amador.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://www.david-amador.com/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://www.david-amador.com/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://www.david-amador.com/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="Instance based Callbacks in C++"><meta property="og:description" content="One of the things that was probably forgotten but the dudes who made C++ standard were callbacks, there’s no out of the box solution for Instance based Callbacks, just for functions.
When I moved to C# I was really happy with the way delegates work, it’s simple, easy and most of all, it works.
On game development one of the things callbacks are usually used is for Buttons, you have a menu and want to attribute a function to each button."><meta property="og:type" content="article"><meta property="og:url" content="https://www.david-amador.com/2010/07/instance-based-callbacks-in-cpp/"><meta property="og:image" content="https://www.david-amador.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2010-07-14T15:18:21+00:00"><meta property="article:modified_time" content="2010-07-14T15:18:21+00:00"><meta property="og:site_name" content="David Amador"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.david-amador.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Instance based Callbacks in C++"><meta name=twitter:description content="One of the things that was probably forgotten but the dudes who made C++ standard were callbacks, there’s no out of the box solution for Instance based Callbacks, just for functions.
When I moved to C# I was really happy with the way delegates work, it’s simple, easy and most of all, it works.
On game development one of the things callbacks are usually used is for Buttons, you have a menu and want to attribute a function to each button."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.david-amador.com/posts/"},{"@type":"ListItem","position":2,"name":"Instance based Callbacks in C++","item":"https://www.david-amador.com/2010/07/instance-based-callbacks-in-cpp/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Instance based Callbacks in C++","name":"Instance based Callbacks in C\u002b\u002b","description":"One of the things that was probably forgotten but the dudes who made C++ standard were callbacks, there’s no out of the box solution for Instance based Callbacks, just for functions.\nWhen I moved to C# I was really happy with the way delegates work, it’s simple, easy and most of all, it works.\nOn game development one of the things callbacks are usually used is for Buttons, you have a menu and want to attribute a function to each button.","keywords":["c++","callbacks"],"articleBody":"One of the things that was probably forgotten but the dudes who made C++ standard were callbacks, there’s no out of the box solution for Instance based Callbacks, just for functions.\nWhen I moved to C# I was really happy with the way delegates work, it’s simple, easy and most of all, it works.\nOn game development one of the things callbacks are usually used is for Buttons, you have a menu and want to attribute a function to each button. Sure you can point it to the same one and make a bunch of if’s and then point to a Global var which does the correct action, but this is not elegant and sure as hell not easy to add/modify stuff.\nI came across a couple of solutions for having an instance based callback:\n1- Do your own – I’ve made one that worked but couldn’t get around to add parameters. I think we might skip this one since you are probably looking for a quick solution.\n2 – Use boost – If you don’t know this have a look, even for other stuff, Boost has tons of awesome apis for helping C++ development. Including smart pointers that basically delete themselves automatically.\n3 – Use PlusCallback – I decided to use this one.\nAnd it’s simple to use\n// Callback without parameters // My example class Sprite* sprite = new Sprite(); cb::Callback0 call1; // Bind callback call1.Reset(sprite, \u0026Sprite::SomeFunction); // Call callback call1();. // Example with parameter cb::Callback1 call2; // Bind callback call2.Reset(sprite, \u0026Sprite::SomeFunctionWithParameterSprite); // Your function should be something like // Sprite::SomeFunctionWithParameterSprite(Sprite* sprite); call2(sprite); Easy right? It even work with return, just switch that void to something else. Let me know if you find a better solution. For now I’m sticking with this one.\n","wordCount":"299","inLanguage":"en","datePublished":"2010-07-14T15:18:21Z","dateModified":"2010-07-14T15:18:21Z","author":{"@type":"Person","name":"David Amador"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.david-amador.com/2010/07/instance-based-callbacks-in-cpp/"},"publisher":{"@type":"Organization","name":"David Amador","logo":{"@type":"ImageObject","url":"https://www.david-amador.com/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.david-amador.com accesskey=h title="David Amador (Alt + H)"><img src=https://www.david-amador.com/apple-touch-icon.png alt aria-label=logo height=35>David Amador</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.david-amador.com/ title=Blog><span>Blog</span></a></li><li><a href=https://www.david-amador.com/games/ title=Games><span>Games</span></a></li><li><a href=https://www.david-amador.com/portfolio/ title=Portfolio><span>Portfolio</span></a></li><li><a href=https://www.david-amador.com/about/ title="About Me"><span>About Me</span></a></li><li><a href=https://www.david-amador.com/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://www.david-amador.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.david-amador.com>Home</a>&nbsp;»&nbsp;<a href=https://www.david-amador.com/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Instance based Callbacks in C++</h1><div class=post-meta><span title='2010-07-14 15:18:21 +0000 UTC'>July 14, 2010</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;299 words&nbsp;·&nbsp;David Amador&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/2010-07-14-instance-based-callbacks-in-cpp.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>One of the things that was probably forgotten but the dudes who made C++ standard were callbacks, there’s no out of the box solution for Instance based Callbacks, just for functions.<br>When I moved to C# I was really happy with the way delegates work, it’s simple, easy and most of all, it works.</p><p>On game development one of the things callbacks are usually used is for Buttons, you have a menu and want to attribute a function to each button. Sure you can point it to the same one and make a bunch of if’s and then point to a Global var which does the correct action, but this is not elegant and sure as hell not easy to add/modify stuff.</p><p>I came across a couple of solutions for having an instance based callback:<br>1- Do your own – I’ve made one that worked but couldn’t get around to add parameters. I think we might skip this one since you are probably looking for a quick solution.<br>2 – Use <a href=http://www.boost.org/>boost</a> – If you don’t know this have a look, even for other stuff, Boost has tons of awesome apis for helping C++ development. Including smart pointers that basically delete themselves automatically.<br>3 – Use <a href=http://codeplea.com/pluscallback/>PlusCallback</a> – I decided to use this one.</p><p><a href=/wp-content/uploads/2010/07/cpp_callback_benchmark.png><img loading=lazy src=/wp-content/uploads/2010/07/cpp_callback_benchmark.png alt title=cpp_callback_benchmark></a></p><p>And it’s simple to use</p><pre tabindex=0><code>&lt;pre lang=&#34;cpp&#34;&gt;
// Callback without parameters

// My example class
Sprite* sprite = new Sprite();

cb::Callback0&lt;void&gt; call1;
// Bind callback
call1.Reset(sprite, &amp;Sprite::SomeFunction);

// Call callback
call1();.

// Example with parameter
cb::Callback1&lt;void sprite=&#34;&#34;&gt; call2; 
// Bind callback
call2.Reset(sprite, &amp;Sprite::SomeFunctionWithParameterSprite);

// Your function should be something like 
// Sprite::SomeFunctionWithParameterSprite(Sprite* sprite);
call2(sprite);
  
&lt;/void&gt;&lt;/void&gt;
</code></pre><p>Easy right? It even work with return, just switch that void to something else. Let me know if you find a better solution. For now I’m sticking with this one.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.david-amador.com/tags/c++/>c++</a></li><li><a href=https://www.david-amador.com/tags/callbacks/>callbacks</a></li></ul><nav class=paginav><a class=prev href=https://www.david-amador.com/2010/07/fixing-dark-borders-sprites-on-iphone/><span class=title>« Prev</span><br><span>Fixing dark borders sprites on iPhone</span>
</a><a class=next href=https://www.david-amador.com/2010/07/developing-on-mac-and-basalt-running-on-the-iphone/><span class=title>Next »</span><br><span>Developing on Mac and Basalt running on the iPhone</span></a></nav></footer><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//upfallstudios.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></main><footer class=footer><span>&copy; 2024 <a href=https://www.david-amador.com>David Amador</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>