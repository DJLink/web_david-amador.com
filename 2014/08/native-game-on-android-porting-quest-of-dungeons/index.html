<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Native game on Android &amp;#8211; Porting Quest of Dungeons | David Amador</title>
<meta name=keywords content="android,port,Quest of Dungeons"><meta name=description content="Quest of Dungeons was made in C++ and OpenGL, it runs on Windows, Mac and Linux in native code. iOS is not a problem either since I just have a thin layer of Objective-C to access some functionality like touch, accelerometer, etc and the rest of the code just runs.
I never made anything for Android, in fact I never even used one before this, so when I decided to port QoD to it, I had no idea of what to expect."><meta name=author content="David Amador"><link rel=canonical href=https://djlink.github.io/web_david-amador.com/2014/08/native-game-on-android-porting-quest-of-dungeons/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/web_david-amador.com/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://djlink.github.io/web_david-amador.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://djlink.github.io/web_david-amador.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://djlink.github.io/web_david-amador.com/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://djlink.github.io/web_david-amador.com/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://djlink.github.io/web_david-amador.com/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="Native game on Android &amp;#8211; Porting Quest of Dungeons"><meta property="og:description" content="Quest of Dungeons was made in C++ and OpenGL, it runs on Windows, Mac and Linux in native code. iOS is not a problem either since I just have a thin layer of Objective-C to access some functionality like touch, accelerometer, etc and the rest of the code just runs.
I never made anything for Android, in fact I never even used one before this, so when I decided to port QoD to it, I had no idea of what to expect."><meta property="og:type" content="article"><meta property="og:url" content="https://djlink.github.io/web_david-amador.com/2014/08/native-game-on-android-porting-quest-of-dungeons/"><meta property="og:image" content="https://djlink.github.io/web_david-amador.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2014-08-30T13:42:52+00:00"><meta property="article:modified_time" content="2014-08-30T13:42:52+00:00"><meta property="og:site_name" content="David Amador"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://djlink.github.io/web_david-amador.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Native game on Android &amp;#8211; Porting Quest of Dungeons"><meta name=twitter:description content="Quest of Dungeons was made in C++ and OpenGL, it runs on Windows, Mac and Linux in native code. iOS is not a problem either since I just have a thin layer of Objective-C to access some functionality like touch, accelerometer, etc and the rest of the code just runs.
I never made anything for Android, in fact I never even used one before this, so when I decided to port QoD to it, I had no idea of what to expect."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://djlink.github.io/web_david-amador.com/posts/"},{"@type":"ListItem","position":2,"name":"Native game on Android \u0026#8211; Porting Quest of Dungeons","item":"https://djlink.github.io/web_david-amador.com/2014/08/native-game-on-android-porting-quest-of-dungeons/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Native game on Android \u0026#8211; Porting Quest of Dungeons","name":"Native game on Android \u0026#8211; Porting Quest of Dungeons","description":"Quest of Dungeons was made in C++ and OpenGL, it runs on Windows, Mac and Linux in native code. iOS is not a problem either since I just have a thin layer of Objective-C to access some functionality like touch, accelerometer, etc and the rest of the code just runs.\nI never made anything for Android, in fact I never even used one before this, so when I decided to port QoD to it, I had no idea of what to expect.","keywords":["android","port","Quest of Dungeons"],"articleBody":"Quest of Dungeons was made in C++ and OpenGL, it runs on Windows, Mac and Linux in native code. iOS is not a problem either since I just have a thin layer of Objective-C to access some functionality like touch, accelerometer, etc and the rest of the code just runs.\nI never made anything for Android, in fact I never even used one before this, so when I decided to port QoD to it, I had no idea of what to expect.\nBack in 2010 I did some research and the NDK was pretty bad, I don’t think it even had stl at the time, but things have changed since then. I decided to jump in and try to port the whole thing. As a primary goal I want to keep as much native code as possible, because it’s already working, porting it to Java could only lead to further bugs in the process.\nTools\nAfter some digging I found that you can use Visual Studio to code for Android (oh happy dayyy).\nVisual Studio 2010: http://www.visualstudio.com/pt-br/visual-studio-homepage-vs.aspx\nVS-Android: https://code.google.com/p/vs-android/\nAndroid NDK, Revision 10 : https://developer.android.com/tools/sdk/ndk/index.html\nAndroid SDK : http://developer.android.com/sdk/index.html\nant-1.9.4: http://ant.apache.org/bindownload.cgi\njdk 1.8.0: http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\nDependencies\nMy next concern were some dependencies that I have on the other versions:\nOpenAL – for sound card access\nVorbis – for OGG load/parsing\nFreeType 2 – for ttf loading\nTinyXML – XML parser\nFortunately all of these were possible to compile to Android.\nApplication\nAs an entry point I used android_native_app_glue which comes with the NDK, this way you can skip all Java (I have 0 lines of java code in the game)\nAnother important thing is this line, telling our manifest file that we have no Java code\nResource Loading\nUsually you just need to do fopen(filename) to open a file. For each platform I would just have to concern with knowing the root folder of where the resources are. But Android works differently, all resources are compressed and you need to use AAssetManager to load them. This proceeds to unpack the file and retrieve a pointer to it. At least this is what I managed to understand from the process.\nAAsset* asset = AAssetManager_open(android_asset_manager, filename, 0); But this caused a big problem, some of the dependencies, like TinyXML receive a string and proceeds to load file file using fopen(). This meant remaking all frameworks, which is not a very good perspective.\nI had some code using fopen and the fact that some external libs used it too posed a problem. I actually spent a couple of days contemplating what would be the best approach but after some research I found a very simple solution.\n#define fopen(name, mode) android_file_open(name, mode) FILE* android_file_open(const char* fname, const char* mode); Now every fopen will be replaced with android_file_open\nAs for the function itself it will try to open the file with AssetManager and return a FILE*\nI also did a small hack that if you try to open the file with write permissions 'w', it will use the standard fopen, that way we can properly write files to the user documents, for save game data and other stuff.\nFILE* android_file_open(const char* fname, const char* mode) { if(mode[0] == 'w'){ #undef fopen return fopen(fname,mode); } #define fopen(name, mode) android_fopen(name, mode) AAsset* asset = AAssetManager_open(android_asset_manager, fname, 0); if(asset) return funopen(asset, android_file_read, android_file_write, android_file_seek, android_file_close); #undef fopen return fopen(fname,mode); } static int android_file_read(void* cookie, char* buf, int size) { return AAsset_read((AAsset*)cookie, buf, size); } static int android_file_write(void* cookie, const char* buf, int size) { return 0; } static fpos_t android_file_seek(void* cookie, fpos_t offset, int whence) { return AAsset_seek((AAsset*)cookie, offset, whence); } static int android_file_close(void* cookie) { AAsset_close((AAsset*)cookie); return 0; } Now just adding this line to the makefile to force the game/libraries to pre-include our file before everything else\nLOCAL_CFLAGS := -g -include android_file_open.h So now all my fopen code works perfectly without any change. OpenGL\nI was using GLES for the iOS version already so I had no problems with the code itself, I did however had some problems with performance on older devices, for example 2010 devices with version 2.3 (the game targets 2.3+)\nEspecially on this function glCopyTexSubImage2D. The game uses some 2d soft shadows for giving a nice atmosphere, it's updated once in a while and I just used glCopyTexSubImage2D with a 256x256 texture instead of a VBO because it worked perfectly on everything else (including all iOS devices), but turns out this is very slow on older Android devices, so I ended up adding an option to the game to disable those effects. This way, newer devices can have all bells and whistles and older devices can still run the game fine. One of the testing devices was a Samsung Galaxy S1 and it went from 5 FPS to 30, which is more then acceptable to play. All 4.0+ devices should have no problem running this, and even if they have they can just disable the option.\nApplication cycle\nThere is a strong possibility the GL view is trashed when the app goes to background, to save resources the view is recreated each time you go back from background to the app. This poses a problem since all gl objects, textures, shaders, VBOs are destroyed too. There is no secure way to ensure the view never gets destroyed while your app is running so I had to make sure each time the view is recreated I re-load all required assets once again. Really not happy with reloading everything again but its the only secure way, if you detect the view was destroyed and the app is still running you have no other choice. For this game it's not a big deal, I have few resources and they are fast to load so the user can't even tell. If I had a bigger game with lots of big textures I would probably had to show a loading screen again. Screen size\nThe different screen sizes for Android can pose a problem, but you can detect screen density and size and scale your game or take proper actions according to what you have.\nHere's how you can detect it in C++\nint density = AConfiguration_getDensity(engine-\u003eapp-\u003econfig); int screen_size = AConfiguration_getScreenSize(engine-\u003eapp-\u003econfig); switch (density) { case ACONFIGURATION_DENSITY_DEFAULT: case ACONFIGURATION_DENSITY_LOW: case ACONFIGURATION_DENSITY_MEDIUM: case ACONFIGURATION_DENSITY_HIGH: break; } switch (screen_size) { case ACONFIGURATION_SCREENSIZE_SMALL: case ACONFIGURATION_SCREENSIZE_NORMAL: case ACONFIGURATION_SCREENSIZE_LARGE: case ACONFIGURATION_SCREENSIZE_XLARGE: break; } You can use screen size to detect if the current device is a tablet or a phone. Final\nNow that I finished the port it doesn't seem that I had to change that much, in fact the game code it self is nearly untouched, just the engine was altered to accommodate for Android. Porting took me ~ 2 months (I have a day job) and while working on a expansion for the game. It's not all chaos in the Android universe, although the hardware fragmentation poses some very serious problems, some devices may be too slow to run even the simpler games.\nIf you have questions about anything else I didn't cover on this article, feel free to ask.\nIn case you are interested in the game, it's out on Steam, App Store and Google Play, feel free to check it out: http://www.questofdungeons.com\n","wordCount":"1268","inLanguage":"en","datePublished":"2014-08-30T13:42:52Z","dateModified":"2014-08-30T13:42:52Z","author":{"@type":"Person","name":"David Amador"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://djlink.github.io/web_david-amador.com/2014/08/native-game-on-android-porting-quest-of-dungeons/"},"publisher":{"@type":"Organization","name":"David Amador","logo":{"@type":"ImageObject","url":"https://djlink.github.io/web_david-amador.com/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://djlink.github.io/web_david-amador.com/ accesskey=h title="David Amador (Alt + H)"><img src=https://djlink.github.io/apple-touch-icon.png alt aria-label=logo height=35>David Amador</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://djlink.github.io/web_david-amador.com/ title=Blog><span>Blog</span></a></li><li><a href=https://djlink.github.io/web_david-amador.com/games/ title=Games><span>Games</span></a></li><li><a href=https://djlink.github.io/web_david-amador.com/portfolio/ title=Portfolio><span>Portfolio</span></a></li><li><a href=https://djlink.github.io/web_david-amador.com/about/ title="About Me"><span>About Me</span></a></li><li><a href=https://djlink.github.io/web_david-amador.com/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://djlink.github.io/web_david-amador.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://djlink.github.io/web_david-amador.com/>Home</a>&nbsp;»&nbsp;<a href=https://djlink.github.io/web_david-amador.com/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Native game on Android &amp;#8211; Porting Quest of Dungeons</h1><div class=post-meta><span title='2014-08-30 13:42:52 +0000 UTC'>August 30, 2014</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;1268 words&nbsp;·&nbsp;David Amador&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/2014-08-30-native-game-on-android-porting-quest-of-dungeons.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>Quest of Dungeons was made in C++ and OpenGL, it runs on Windows, Mac and Linux in native code. iOS is not a problem either since I just have a thin layer of Objective-C to access some functionality like touch, accelerometer, etc and the rest of the code just runs.</p><p>I never made anything for Android, in fact I never even used one before this, so when I decided to port QoD to it, I had no idea of what to expect.</p><p>Back in 2010 I did some research and the NDK was pretty bad, I don’t think it even had stl at the time, but things have changed since then. I decided to jump in and try to port the whole thing. As a primary goal I want to keep as much native code as possible, because it’s already working, porting it to Java could only lead to further bugs in the process.</p><p><strong>Tools</strong></p><p>After some digging I found that you can use Visual Studio to code for Android (oh happy dayyy).</p><p><em>Visual Studio 2010</em>: <a href=http://www.visualstudio.com/pt-br/visual-studio-homepage-vs.aspx>http://www.visualstudio.com/pt-br/visual-studio-homepage-vs.aspx</a><br><em>VS-Android</em>: <a href=https://code.google.com/p/vs-android/>https://code.google.com/p/vs-android/</a><br><em>Android NDK, Revision 10</em> : <a href=https://developer.android.com/tools/sdk/ndk/index.html>https://developer.android.com/tools/sdk/ndk/index.html</a><br><em>Android SDK</em> : <a href=http://developer.android.com/sdk/index.html>http://developer.android.com/sdk/index.html</a><br><em>ant-1.9.4</em>: <a href=http://ant.apache.org/bindownload.cgi>http://ant.apache.org/bindownload.cgi</a><br><em>jdk 1.8.0</em>: <a href=http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html>http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a></p><p><strong>Dependencies</strong></p><p>My next concern were some dependencies that I have on the other versions:</p><p>OpenAL – for sound card access<br>Vorbis – for OGG load/parsing<br>FreeType 2 – for ttf loading<br>TinyXML – XML parser</p><p>Fortunately all of these were possible to compile to Android.</p><p><strong>Application</strong></p><p>As an entry point I used android_native_app_glue which comes with the NDK, this way you can skip all Java (I have 0 lines of java code in the game)</p><p>Another important thing is this line, telling our manifest file that we have no Java code</p><pre tabindex=0><code>&lt;pre lang=&#34;xml&#34;&gt;
&lt;application android:hascode=&#34;false&#34; android:label=&#34;@string/app_name&#34;&gt;&lt;p&gt;&lt;strong&gt;Resource Loading&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Usually you just need to do fopen(filename) to open a file. For each platform I would just have to concern with knowing the root folder of where the resources are. But Android works differently, all resources are compressed and you need to use AAssetManager to load them. This proceeds to unpack the file and retrieve a pointer to it. At least this is what I managed to understand from the process.&lt;/p&gt;
&lt;pre lang=&#34;cpp&#34;&gt;
AAsset* asset = AAssetManager_open(android_asset_manager, filename, 0);

&lt;p&gt;But this caused a big problem, some of the dependencies, like TinyXML receive a string and proceeds to load file file using fopen(). This meant remaking all frameworks, which is not a very good perspective.&lt;br&gt;&lt;/br&gt;
I had some code using fopen and the fact that some external libs used it too posed a problem. I actually spent a couple of days contemplating what would be the best approach but after some research I found a very simple solution.&lt;/p&gt;
&lt;pre lang=&#34;cpp&#34;&gt;
#define fopen(name, mode) android_file_open(name, mode)
FILE* android_file_open(const char* fname, const char* mode);

&lt;p&gt;Now every fopen will be replaced with android_file_open&lt;/p&gt;
&lt;p&gt;As for the function itself it will try to open the file with AssetManager and return a FILE*&lt;br&gt;&lt;/br&gt;
I also did a small hack that if you try to open the file with write permissions &#39;w&#39;, it will use the standard fopen, that way we can properly write files to the user documents, for save game data and other stuff.&lt;/p&gt;
&lt;pre lang=&#34;cpp&#34;&gt;

FILE* android_file_open(const char* fname, const char* mode) 
{
        if(mode[0] == &#39;w&#39;){
#undef  fopen
		return fopen(fname,mode);
	}
#define fopen(name, mode) android_fopen(name, mode)
        AAsset* asset = AAssetManager_open(android_asset_manager, fname, 0);
        if(asset) return funopen(asset, android_file_read, android_file_write, android_file_seek, android_file_close);
#undef  fopen
	return fopen(fname,mode); 
}

static int android_file_read(void* cookie, char* buf, int size) {
  return AAsset_read((AAsset*)cookie, buf, size);
}

static int android_file_write(void* cookie, const char* buf, int size) {
  return 0; 
}

static fpos_t android_file_seek(void* cookie, fpos_t offset, int whence) {
  return AAsset_seek((AAsset*)cookie, offset, whence);
}

static int android_file_close(void* cookie) {
  AAsset_close((AAsset*)cookie);
  return 0;
}

&lt;p&gt;Now just adding this line to the makefile to force the game/libraries to pre-include our file before everything else&lt;/p&gt;
&lt;pre lang=&#34;cpp&#34;&gt;
LOCAL_CFLAGS := -g -include android_file_open.h

&lt;p&gt;So now all my fopen code works perfectly without any change. &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;OpenGL&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;I was using GLES for the iOS version already so I had no problems with the code itself, I did however had some problems with performance on older devices, for example 2010 devices with version 2.3 (the game targets 2.3+)&lt;/p&gt;
&lt;p&gt;Especially on this function &lt;em&gt;glCopyTexSubImage2D&lt;/em&gt;. &lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;soft_shadows&#34; class=&#34;alignnone size-full wp-image-2477&#34; decoding=&#34;async&#34; height=&#34;265&#34; loading=&#34;lazy&#34; sizes=&#34;(max-width: 851px) 100vw, 851px&#34; src=&#34;/wp-content/uploads/2014/08/soft_shadows.png&#34; srcset=&#34;/wp-content/uploads/2014/08/soft_shadows.png 851w, /wp-content/uploads/2014/08/soft_shadows-300x93.png 300w, /wp-content/uploads/2014/08/soft_shadows-210x65.png 210w&#34; width=&#34;851&#34;&gt;&lt;/img&gt;&lt;/p&gt;
&lt;p&gt;The game uses some 2d soft shadows for giving a nice atmosphere, it&#39;s updated once in a while and I just used glCopyTexSubImage2D with a 256x256 texture instead of a VBO because it worked perfectly on everything else (including all iOS devices), but turns out this is very slow on older Android devices, so I ended up adding an option to the game to disable those effects. This way, newer devices can have all bells and whistles and older devices can still run the game fine. One of the testing devices was a Samsung Galaxy S1 and it went from 5 FPS to 30, which is more then acceptable to play. All 4.0+ devices should have no problem running this, and even if they have they can just disable the option.&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;High Performance&#34; class=&#34;alignnone size-medium wp-image-2475&#34; decoding=&#34;async&#34; height=&#34;300&#34; loading=&#34;lazy&#34; sizes=&#34;(max-width: 169px) 100vw, 169px&#34; src=&#34;/wp-content/uploads/2014/08/photo-169x300.png&#34; srcset=&#34;/wp-content/uploads/2014/08/photo-169x300.png 169w, /wp-content/uploads/2014/08/photo-576x1024.png 576w, /wp-content/uploads/2014/08/photo-210x372.png 210w, /wp-content/uploads/2014/08/photo.png 640w&#34; width=&#34;169&#34;&gt;&lt;/img&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Application cycle&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;There is a strong possibility the GL view is trashed when the app goes to background, to save resources the view is recreated each time you go back from background to the app. This poses a problem since all gl objects, textures, shaders, VBOs are destroyed too. There is no secure way to ensure the view never gets destroyed while your app is running so I had to make sure each time the view is recreated I re-load all required assets once again. Really not happy with reloading everything again but its the only secure way, if you detect the view was destroyed and the app is still running you have no other choice. For this game it&#39;s not a big deal, I have few resources and they are fast to load so the user can&#39;t even tell. If I had a bigger game with lots of big textures I would probably had to show a loading screen again. &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Screen size&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The different screen sizes for Android can pose a problem, but you can detect screen density and size and scale your game or take proper actions according to what you have.&lt;br&gt;&lt;/br&gt;
Here&#39;s how you can detect it in C++&lt;/p&gt;
&lt;pre lang=&#34;cpp&#34;&gt;
int density = AConfiguration_getDensity(engine-&gt;app-&gt;config);
int screen_size = AConfiguration_getScreenSize(engine-&gt;app-&gt;config);

switch (density)
{
case ACONFIGURATION_DENSITY_DEFAULT:
case ACONFIGURATION_DENSITY_LOW:
case ACONFIGURATION_DENSITY_MEDIUM:
case ACONFIGURATION_DENSITY_HIGH:
break;
}

switch (screen_size)
{
case ACONFIGURATION_SCREENSIZE_SMALL:
case ACONFIGURATION_SCREENSIZE_NORMAL:
case ACONFIGURATION_SCREENSIZE_LARGE:
case ACONFIGURATION_SCREENSIZE_XLARGE:
	break;
}

&lt;p&gt;You can use screen size to detect if the current device is a tablet or a phone. &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Final&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Now that I finished the port it doesn&#39;t seem that I had to change that much, in fact the game code it self is nearly untouched, just the engine was altered to accommodate for Android. Porting took me ~ 2 months (I have a day job) and while working on a expansion for the game. It&#39;s not all chaos in the Android universe, although the hardware fragmentation poses some very serious problems, some devices may be too slow to run even the simpler games.&lt;/p&gt;
&lt;p&gt;If you have questions about anything else I didn&#39;t cover on this article, feel free to ask.&lt;/p&gt;
&lt;p&gt;In case you are interested in the game, it&#39;s out on &lt;a href=&#34;http://store.steampowered.com/app/270050/&#34;&gt;Steam&lt;/a&gt;, &lt;a href=&#34;https://itunes.apple.com/us/app/quest-of-dungeons/id698726956?mt=8&#34;&gt;App Store&lt;/a&gt; and &lt;a href=&#34;https://play.google.com/store/apps/details?id=com.davidamador.quest_of_dungeons&#34;&gt;Google Play&lt;/a&gt;, feel free to check it out: &lt;a href=&#34;http://www.questofdungeons.com&#34; target=&#34;_blank&#34;&gt;http://www.questofdungeons.com&lt;/a&gt;&lt;/p&gt;&lt;/application&gt;
</code></pre></div><footer class=post-footer><ul class=post-tags><li><a href=https://djlink.github.io/web_david-amador.com/tags/android/>android</a></li><li><a href=https://djlink.github.io/web_david-amador.com/tags/port/>port</a></li><li><a href=https://djlink.github.io/web_david-amador.com/tags/quest-of-dungeons/>Quest of Dungeons</a></li></ul><nav class=paginav><a class=prev href=https://djlink.github.io/web_david-amador.com/2014/10/indie-dev-day-job-making-it-work-building-quest-of-dungeons/><span class=title>« Prev</span><br><span>Indie Dev &amp;#038; Day Job, Making it work &amp;#8211; Building Quest of Dungeons</span>
</a><a class=next href=https://djlink.github.io/web_david-amador.com/2014/07/blog-launch/><span class=title>Next »</span><br><span>Upfall Studios Blog launch</span></a></nav></footer><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//upfallstudios.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></main><footer class=footer><span>&copy; 2024 <a href=https://djlink.github.io/web_david-amador.com/>David Amador</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>