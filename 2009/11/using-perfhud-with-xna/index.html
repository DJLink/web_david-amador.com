<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Using PerfHUD with XNA | David Amador</title>
<meta name="keywords" content="Ati, GPUPerfStudio, NVIDIA, PerfHUD, XNA">
<meta name="description" content="I am definitely a fan of ATI cards. Had a few Geforces but didn’t liked them very much. I actually noticed image quality decrease when switching from an old Radeon 9800 to a Geforce 8k something. I’m very happy with my Radeon 4890, now for the downside, PerfHUD, a very handy tool for Game Developers is only available for NVIDIA chipsets and although ATI has it’s own GPUPerfStudio it’s not the same thing.">
<meta name="author" content="David Amador">
<link rel="canonical" href="https://www.david-amador.com/2009/11/using-perfhud-with-xna/">
<meta name="google-site-verification" content="google913fe85edca3ebf5">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7656d99afc7c7c58a9e05c7f5dacdb8e9a0310822b1b126ac85729aea108054f.css" rel="preload stylesheet" as="style">
<link rel="icon" href="https://www.david-amador.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.david-amador.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.david-amador.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://www.david-amador.com/david-amador-pixel.png">
<link rel="mask-icon" href="https://www.david-amador.com/david-amador-pixel.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XSKJ8VSQQV"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-XSKJ8VSQQV', { 'anonymize_ip': false });
}
</script>
<meta property="og:title" content="Using PerfHUD with XNA" />
<meta property="og:description" content="I am definitely a fan of ATI cards. Had a few Geforces but didn’t liked them very much. I actually noticed image quality decrease when switching from an old Radeon 9800 to a Geforce 8k something. I’m very happy with my Radeon 4890, now for the downside, PerfHUD, a very handy tool for Game Developers is only available for NVIDIA chipsets and although ATI has it’s own GPUPerfStudio it’s not the same thing." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.david-amador.com/2009/11/using-perfhud-with-xna/" /><meta property="og:image" content="https://www.david-amador.com/david-amador-pixel.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2009-11-18T15:16:54+00:00" />
<meta property="article:modified_time" content="2009-11-18T15:16:54+00:00" /><meta property="og:site_name" content="David Amador" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://www.david-amador.com/david-amador-pixel.png"/>

<meta name="twitter:title" content="Using PerfHUD with XNA"/>
<meta name="twitter:description" content="I am definitely a fan of ATI cards. Had a few Geforces but didn’t liked them very much. I actually noticed image quality decrease when switching from an old Radeon 9800 to a Geforce 8k something. I’m very happy with my Radeon 4890, now for the downside, PerfHUD, a very handy tool for Game Developers is only available for NVIDIA chipsets and although ATI has it’s own GPUPerfStudio it’s not the same thing."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://www.david-amador.com/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Using PerfHUD with XNA",
      "item": "https://www.david-amador.com/2009/11/using-perfhud-with-xna/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Using PerfHUD with XNA",
  "name": "Using PerfHUD with XNA",
  "description": "I am definitely a fan of ATI cards. Had a few Geforces but didn’t liked them very much. I actually noticed image quality decrease when switching from an old Radeon 9800 to a Geforce 8k something. I’m very happy with my Radeon 4890, now for the downside, PerfHUD, a very handy tool for Game Developers is only available for NVIDIA chipsets and although ATI has it’s own GPUPerfStudio it’s not the same thing.",
  "keywords": [
    "Ati", "GPUPerfStudio", "NVIDIA", "PerfHUD", "XNA"
  ],
  "articleBody": "I am definitely a fan of ATI cards. Had a few Geforces but didn’t liked them very much. I actually noticed image quality decrease when switching from an old Radeon 9800 to a Geforce 8k something. I’m very happy with my Radeon 4890, now for the downside, PerfHUD, a very handy tool for Game Developers is only available for NVIDIA chipsets and although ATI has it’s own GPUPerfStudio it’s not the same thing.\nAnyway for those who have one and are developing for XNA you may have noticed that it doesn’t run PerfHUD out of the box.\nYou will get an error, something like:\n“This applications is not configured for using PerfHUD. Consult the User’s Guide for more information”\nLuckily there’s a little trick we can use to fix this, first we create a new class:\n// class that inherits from GraphicsDeviceManager public class PerfHUDGraphicDeviceManager : GraphicsDeviceManager { public PerfHUDGraphicDeviceManager(Game game) : base(game) // Pass game to base class { } // We override the RankDevices to search for a PerfHUD protected override void RankDevices(List foundDevices) { base.RankDevices(foundDevices); bool has_perfHud = false; foreach (var device in foundDevices) { if (device.Adapter.Description.Contains(\"PerfHUD\")) { has_perfHud = true; break; } } // Found PerfHUD if (has_perfHud) { var temp = foundDevices.OrderBy( (gdi) =\u003e !(gdi.Adapter.Description.Contains(\"PerfHUD\")) ).ToArray(); foundDevices.Clear(); foundDevices.AddRange(temp); foreach (var dev in foundDevices) { dev.DeviceType = DeviceType.Reference; } } } } This class basically searches for PerfHUD, so when you open it with it this class detects that the software exists and allows it’s usage. If not found, the regular GraphicDeviceManager is used. Now instead of creating a new GraphicsDeviceManager() on your Game class just do something like:\npublic class Game1 : Game { public Game1() { new PerfHUDGraphicDeviceManager(this); } } I hope this helps.\n",
  "wordCount" : "290",
  "inLanguage": "en",
  "datePublished": "2009-11-18T15:16:54Z",
  "dateModified": "2009-11-18T15:16:54Z",
  "author":{
    "@type": "Person",
    "name": "David Amador"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.david-amador.com/2009/11/using-perfhud-with-xna/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "David Amador",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.david-amador.com/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.david-amador.com" accesskey="h" title="David Amador (Alt + H)">
                <img src="https://www.david-amador.com/david-amador-pixel.png" alt="" aria-label="logo"
                    height="35">David Amador</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.david-amador.com/" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
            <li>
                <a href="https://www.david-amador.com/games/" title="Games">
                    <span>Games</span>
                </a>
            </li>
            <li>
                <a href="https://www.david-amador.com/portfolio/" title="Portfolio">
                    <span>Portfolio</span>
                </a>
            </li>
            <li>
                <a href="https://www.david-amador.com/about/" title="About Me">
                    <span>About Me</span>
                </a>
            </li>
            <li>
                <a href="https://www.david-amador.com/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="https://www.david-amador.com/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://www.david-amador.com">Home</a>&nbsp;»&nbsp;<a href="https://www.david-amador.com/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Using PerfHUD with XNA
    </h1>
    <div class="post-meta"><span title='2009-11-18 15:16:54 +0000 UTC'>November 18, 2009</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;290 words&nbsp;·&nbsp;David Amador

</div>
  </header> 
  <div class="post-content"><p>I am definitely a fan of ATI cards. Had a few Geforces but didn’t liked them very much. I actually noticed image quality decrease when switching from an old Radeon 9800 to a Geforce 8k something. I’m very happy with my Radeon 4890, now for the downside, PerfHUD, a very handy tool for Game Developers is only available for NVIDIA chipsets and although ATI has it’s own GPUPerfStudio it’s not the same thing.<br>
Anyway for those who have one and are developing for XNA you may have noticed that it doesn’t run PerfHUD out of the box.<br>
You will get an error, something like:<br>
<strong>“This applications is not configured for using PerfHUD. Consult the User’s Guide for more information”</strong></p>
<p><a href="/wp-content/uploads/2009/11/perfHUD_Error.jpg"><img loading="lazy" src="/wp-content/uploads/2009/11/perfHUD_Error-300x236.jpg" alt="perfHUD_Error"  title="perfHUD_Error"  />
</a></p>
<p>Luckily there’s a little trick we can use to fix this, first we create a new class:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="c1">// class that inherits from GraphicsDeviceManager</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="k">class</span> <span class="nc">PerfHUDGraphicDeviceManager</span> <span class="p">:</span> <span class="n">GraphicsDeviceManager</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kd">public</span> <span class="n">PerfHUDGraphicDeviceManager</span><span class="p">(</span><span class="n">Game</span> <span class="n">game</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="n">game</span><span class="p">)</span> <span class="c1">// Pass game to base class</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// We override the RankDevices to search for a PerfHUD</span>
</span></span><span class="line"><span class="cl">        <span class="kd">protected</span> <span class="kd">override</span> <span class="k">void</span> <span class="n">RankDevices</span><span class="p">(</span><span class="n">List</span> <span class="n">foundDevices</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">base</span><span class="p">.</span><span class="n">RankDevices</span><span class="p">(</span><span class="n">foundDevices</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="kt">bool</span> <span class="n">has_perfHud</span> <span class="p">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">device</span> <span class="k">in</span> <span class="n">foundDevices</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">device</span><span class="p">.</span><span class="n">Adapter</span><span class="p">.</span><span class="n">Description</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="s">&#34;PerfHUD&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">has_perfHud</span> <span class="p">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// Found PerfHUD</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">has_perfHud</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="kt">var</span> <span class="n">temp</span> <span class="p">=</span> <span class="n">foundDevices</span><span class="p">.</span><span class="n">OrderBy</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                    <span class="p">(</span><span class="n">gdi</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">!(</span><span class="n">gdi</span><span class="p">.</span><span class="n">Adapter</span><span class="p">.</span><span class="n">Description</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="s">&#34;PerfHUD&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">                <span class="p">).</span><span class="n">ToArray</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="n">foundDevices</span><span class="p">.</span><span class="n">Clear</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                <span class="n">foundDevices</span><span class="p">.</span><span class="n">AddRange</span><span class="p">(</span><span class="n">temp</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">dev</span> <span class="k">in</span> <span class="n">foundDevices</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">dev</span><span class="p">.</span><span class="n">DeviceType</span> <span class="p">=</span> <span class="n">DeviceType</span><span class="p">.</span><span class="n">Reference</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></div><p>This class basically searches for PerfHUD, so when you open it with it this class detects that the software exists and allows it’s usage. If not found, the regular GraphicDeviceManager is used. Now instead of creating a new GraphicsDeviceManager() on your Game class just do something like:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="kd">public</span> <span class="k">class</span> <span class="nc">Game1</span> <span class="p">:</span> <span class="n">Game</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="kd">public</span> <span class="n">Game1</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">new</span> <span class="n">PerfHUDGraphicDeviceManager</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p><a href="/wp-content/uploads/2009/11/perfHUD_run.png"><img loading="lazy" src="/wp-content/uploads/2009/11/perfHUD_run-300x250.png" alt="perfHUD_run"  title="perfHUD_run"  />
</a><a href="/wp-content/uploads/2009/11/perfHUD_working_xna.jpg"><img loading="lazy" src="/wp-content/uploads/2009/11/perfHUD_working_xna-300x236.jpg" alt="perfHUD_working_xna"  title="perfHUD_working_xna"  />
</a></p>
<p>I hope this helps.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://www.david-amador.com/tags/ati/">Ati</a></li>
      <li><a href="https://www.david-amador.com/tags/gpuperfstudio/">GPUPerfStudio</a></li>
      <li><a href="https://www.david-amador.com/tags/nvidia/">NVIDIA</a></li>
      <li><a href="https://www.david-amador.com/tags/perfhud/">PerfHUD</a></li>
      <li><a href="https://www.david-amador.com/tags/xna/">XNA</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://www.david-amador.com/2009/11/how-to-do-a-xna-log-file/">
    <span class="title">« Prev</span>
    <br>
    <span>How to do a Xna Log file</span>
  </a>
  <a class="next" href="https://www.david-amador.com/2009/11/unreal-engine-3-is-now-free/">
    <span class="title">Next »</span>
    <br>
    <span>Unreal Engine 3 is now free</span>
  </a>
</nav>

  </footer><div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "upfallstudios" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://www.david-amador.com">David Amador</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
